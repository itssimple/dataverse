var I=Object.defineProperty;var S=(a,n,l)=>n in a?I(a,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[n]=l;var d=(a,n,l)=>(S(a,typeof n!="symbol"?n+"":n,l),l);import{o as u,_ as h,D as w,B as D}from"./vendor-f8b720e3.js";(function(){try{var a=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},n=new Error().stack;n&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[n]="1a51ebd8-da9a-4d25-9c95-2ffc6eb32499",a._sentryDebugIdIdentifier="sentry-dbid-1a51ebd8-da9a-4d25-9c95-2ffc6eb32499")}catch{}})();(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))b(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const e of o.addedNodes)e.tagName==="LINK"&&e.rel==="modulepreload"&&b(e)}).observe(document,{childList:!0,subtree:!0});function l(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function b(r){if(r.ep)return;r.ep=!0;const o=l(r);fetch(r.href,o)}})();function m(a,...n){console.log(`[${a}]`,JSON.stringify([...n]))}function v(){return u(h,{children:["Main page - ",u("a",{href:"https://o2g.itssimple.se/redirect/everversedata",children:"Log in"})]})}function j(){return u(h,{children:[u("header",{className:"header tooltip",children:"Dataverse"}),u("div",{class:"app",children:u(w,{children:[u(h,{path:"/",children:u(v,{})}),u("div",{path:"/authenticated",children:"Authenticated"})]})}),u("footer",{className:"fui body fiction",children:"Â© 2023 NoLifeKing85#2914"})]})}class B{constructor(){d(this,"DBInstance");d(this,"initializeDatabase");d(this,"setItem");d(this,"getItem");d(this,"removeItem");d(this,"setStorageItem");d(this,"getStorageItem");d(this,"getStorageItems");d(this,"removeStorageItem");this.DBInstance=null,this.initializeDatabase=async function(){return new Promise((e,t)=>{let i=window.indexedDB.open("destiny2-dataverse",2);i.onupgradeneeded=function(s){const f=i.result;m("DB","Old",s.oldVersion,"New",s.newVersion),s.oldVersion<1&&(m("DB","Creating first version of database, since it never existed on this installation."),f.createObjectStore("storage",{autoIncrement:!1,keyPath:"key"}).createIndex("by_key","key")),s.oldVersion<2&&(m("DB","Creating object store for player/character activity"),f.createObjectStore("playerActivity",{autoIncrement:!1,keyPath:"key"}).createIndex("by_key","key"),f.createObjectStore("activityDetails",{autoIncrement:!1,keyPath:"key"}).createIndex("by_key","key"))},i.onsuccess=function(s){m("DB","Loaded database"),o.DBInstance=s.target.result,e()},i.onerror=function(s){m("DB","Failed to load database"),t(s)}})};async function n(e,t,i){return new Promise((s,f)=>{const c=o.DBInstance.transaction(e,"readwrite").objectStore(e).put({key:t,value:i});c.onsuccess=function(){s()},c.onerror=function(g){f(g)}})}async function l(e,t=null){return new Promise((i,s)=>{const y=o.DBInstance.transaction(e,"readonly").objectStore(e).getAll();y.onsuccess=function(){const c=y.result;i(t?c.filter(t):c)},y.onerror=function(c){s(c)}})}async function b(e,t,i=null){return new Promise((s,f)=>{const c=o.DBInstance.transaction(e,"readonly").objectStore(e).get(t);c.onsuccess=function(g){g.target.result?s(g.target.result.value):s(i)},c.onerror=function(g){f(g)}})}async function r(e,t){return new Promise((i,s)=>{const y=o.DBInstance.transaction(e,"readwrite").objectStore(e).delete(t);y.onsuccess=function(){i()},y.onerror=function(c){s(c)}})}this.setItem=async function(e,t){return await n("storage",e,t)},this.getItem=async function(e,t=null){return await b("storage",e,t)},this.removeItem=async function(e){return await r("storage",e)},this.setStorageItem=async function(e,t,i){return await n(e,t,i)},this.getStorageItem=async function(e,t,i=null){return await b(e,t,i)},this.getStorageItems=async function(e,t=null){return await l(e,t)},this.removeStorageItem=async function(e,t){return await r(e,t)};var o=this;return this}}window.db=new B;m("MAIN","Starting app...");window.db.initializeDatabase();D(u(j,{}),document.getElementById("app"));
//# sourceMappingURL=index-1207655b.js.map
